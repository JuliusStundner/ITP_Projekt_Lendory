@inherits LayoutComponentBase
@using MudBlazor
@inject IJSRuntime JS


<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>

    <!-- TOP APP BAR -->
    <LendoryAppBar OnMenuClicked="ToggleDrawer" />

    <MudDrawer Anchor="Anchor.Right"
               Open="@_drawerOpen"
               Variant="DrawerVariant.Temporary"
               Elevation="4"
               ClipMode="DrawerClipMode.Never"
               Width="280px">

        <MudDrawerHeader>
            <MudText Typo="Typo.h6">Menü</MudText>
        </MudDrawerHeader>

        <!-- HAUPTMENÜ -->
        <MudNavMenu Dense="true">
            <MudNavLink Href="/" Icon="@Icons.Material.Filled.Home">
                Dashboard
            </MudNavLink>

            <MudNavLink Href="/category" Icon="@Icons.Material.Filled.Category">
                Kategorien
            </MudNavLink>

            <MudNavLink Href="/profile" Icon="@Icons.Material.Filled.Person">
                Account
            </MudNavLink>
        </MudNavMenu>

        <!-- ADMIN TRENNER -->
        <div class="admin-separator">
            Admin-Funktionen
        </div>

        <!-- ADMIN MENÜ -->
        <MudNavMenu Dense="true">
            <MudNavLink Href="/createItem" Icon="@Icons.Material.Filled.AddBox">
                Item erstellen
            </MudNavLink>

            <MudNavLink Href="/createCategory" Icon="@Icons.Material.Filled.Category">
                Kategorie erstellen
            </MudNavLink>

            <MudNavLink Href="/statistik" Icon="@Icons.Material.Filled.BarChart">
                Statistik
            </MudNavLink>
        </MudNavMenu>

        <!-- LEERRAUM NACH UNTEN -->
        <MudSpacer />

        <!-- DOWNLOAD -->
        <div class="drawer-download"
             @onclick="InstallPwa">
            Herunterladen
        </div>

    </MudDrawer>


    <!-- PAGE CONTENT -->
    <MudMainContent>
        @Body
    </MudMainContent>

</MudLayout>

<style>

    .admin-separator {
        margin: 12px 16px 6px;
        font-size: 0.75rem;
        color: rgba(0,0,0,0.45);
        text-align: center;
        position: relative;
    }

    .admin-separator::before,
    .admin-separator::after {
        content: "";
        position: absolute;
        top: 50%;
        width: 30%;
        height: 1px;
        background: rgba(0,0,0,0.25);
    }

    .admin-separator::before {
        left: 0;
    }

    .admin-separator::after {
        right: 0;
    }

    .drawer-download {
        padding: 12px 20px;
        font-size: 0.85rem;
        color: rgba(0,0,0,0.45);
        cursor: pointer;
    }

    .drawer-download:hover {
        color: rgba(0,0,0,0.7);
        text-decoration: underline;
    }

    .drawer-download {
        padding: 12px 20px;
        font-size: 0.85rem;
        color: rgba(0,0,0,0.45);
        cursor: pointer;
        user-select: none;
    }

    .drawer-download:hover {
        color: rgba(0,0,0,0.7);
        text-decoration: underline;
    }
</style>

@code {

    private bool _drawerOpen;

    private void ToggleDrawer()
    {
        _drawerOpen = !_drawerOpen;
    }

    private async Task InstallPwa()
    {
        await JS.InvokeVoidAsync("installPwa");
    }
}
